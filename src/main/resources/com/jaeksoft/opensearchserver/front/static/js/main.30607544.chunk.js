(this.webpackJsonpopensearchserver=this.webpackJsonpopensearchserver||[]).push([[0],{338:function(e,t,n){"use strict";n.r(t);var a,r,i=n(0),c=n.n(i),l=n(31),s=n.n(l),o=n(28),d=n(70),j=n(239),b="opensearchserver:state";!function(e){e[e.INDICES=0]="INDICES",e[e.CRAWLS=1]="CRAWLS",e[e.QUERIES=2]="QUERIES",e[e.GRAPHQL=3]="GRAPHQL",e[e.SCHEMA=4]="SCHEMA"}(a||(a={})),function(e){e[e.WEB_CRAWLS=0]="WEB_CRAWLS",e[e.FILE_CRAWLS=1]="FILE_CRAWLS"}(r||(r={}));var u,O={view:a.INDICES,crawlsView:r.WEB_CRAWLS,selectedIndex:void 0,editWebCrawl:void 0,editFileCrawl:void 0};!function(e){e[e.SET_VIEW=0]="SET_VIEW",e[e.SET_CRAWLS_VIEW=1]="SET_CRAWLS_VIEW",e[e.EDIT_SCHEMA=2]="EDIT_SCHEMA",e[e.EDIT_WEB_CRAWL=3]="EDIT_WEB_CRAWL",e[e.EDIT_FILE_CRAWL=4]="EDIT_FILE_CRAWL"}(u||(u={}));var x,h,m,f,v,w,g,C,p,S,W,E,y,I,L=function(e){return{type:u.SET_VIEW,view:e}},k=function(e){return{type:u.SET_CRAWLS_VIEW,crawlsView:e}},A=function(e,t,n){return{type:u.EDIT_WEB_CRAWL,crawlName:e,indexName:t,settings:n}},_=function(e,t,n){return{type:u.EDIT_FILE_CRAWL,crawlName:e,indexName:t,settings:n}},R=window.localStorage.getItem(b),$=R?JSON.parse(R):O,N=Object(j.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.SET_VIEW:e=Object(d.a)(Object(d.a)({},e),{},{view:t.view});break;case u.SET_CRAWLS_VIEW:e=Object(d.a)(Object(d.a)({},e),{},{view:a.CRAWLS,crawlsView:t.crawlsView,editWebCrawl:void 0,editFileCrawl:void 0});break;case u.EDIT_SCHEMA:e=Object(d.a)(Object(d.a)({},e),{},{selectedIndex:t.selectedIndex,view:a.SCHEMA});break;case u.EDIT_WEB_CRAWL:e=Object(d.a)(Object(d.a)({},e),{},{editWebCrawl:{crawlName:t.crawlName,indexName:t.indexName,settings:t.settings},view:a.CRAWLS,crawlsView:r.WEB_CRAWLS});break;case u.EDIT_FILE_CRAWL:e=Object(d.a)(Object(d.a)({},e),{},{editFileCrawl:{crawlName:t.crawlName,indexName:t.indexName,settings:t.settings},view:a.CRAWLS,crawlsView:r.FILE_CRAWLS});break;default:return e}return window.localStorage.setItem(b,JSON.stringify(e)),e}),$),D=n(383),F=n(386),T=n(414),z=n(387),P=n.p+"static/media/oss_logo.40a9f4cc.png",B=n(3),U=function(){var e=Object(o.c)((function(e){return e.view})),t=Object(o.b)();return Object(B.jsx)(D.a,{position:"static",color:"transparent",children:Object(B.jsxs)(F.a,{children:[Object(B.jsx)("img",{src:P,alt:"OpenSearchServer Logo",style:{maxHeight:"48px",width:"auto"}}),Object(B.jsxs)(T.a,{value:e,onChange:function(e,n){t(L(n))},"aria-label":"Main tab navigation",children:[Object(B.jsx)(z.a,{label:"Indices",value:a.INDICES}),Object(B.jsx)(z.a,{label:"Crawls",value:a.CRAWLS}),Object(B.jsx)(z.a,{label:"Queries",value:a.QUERIES}),Object(B.jsx)(z.a,{label:"GraphQL",value:a.GRAPHQL})]})]})})},V=n(20),q=n.n(V),G=n(61),Q=n(240),H=(n(335),"http://localhost:9090/graphql"),M=function(){return Object(B.jsx)(Q.a,{fetcher:function(){var e=Object(G.a)(q.a.mark((function e(t){var n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(H,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t),credentials:"same-origin"});case 2:return n=e.sent,e.abrupt("return",n.json().catch((function(){return n.text()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})},J=n(17),X=n(39),K=n(389),Y=n(390),Z=n(419),ee=n(412),te=n(394),ne=n(415),ae=n(398),re=n(399),ie=n(400),ce=n(401),le=n(402),se=n(403),oe=n(404),de=n(405),je=Object(K.a)(x||(x=Object(X.a)(["\n  query IndexList($keywords: String, $start: Int, $rows: Int) {\n    indexList(keywords: $keywords, start: $start, rows: $rows) {\n      name\n      id\n    }\n  }\n"]))),be=Object(K.a)(h||(h=Object(X.a)(["\n  mutation Createindex($name: String!) {\n    createIndex(name: $name)\n  }\n"]))),ue=Object(K.a)(m||(m=Object(X.a)(["\n  mutation Deleteindex($name: String!) {\n    deleteIndex(name: $name)\n  }\n"]))),Oe=function(){var e=Object(o.b)(),t=Object(i.useState)(""),n=Object(J.a)(t,2),a=n[0],r=n[1],c=Object(i.useState)(0),l=Object(J.a)(c,1)[0],s=Object(i.useState)(1e3),d=Object(J.a)(s,1)[0],j=Object(Y.a)(je,{variables:{keywords:a,start:l,rows:d},fetchPolicy:"no-cache"}),b=j.loading,O=j.error,x=j.data,h=j.refetch,m=Object(Z.a)(be,{variables:{name:a},onError:function(e){alert(e),console.error(e)}}),f=Object(J.a)(m,2),v=f[0],w=f[1].loading,g=Object(Z.a)(ue,{variables:{name:a},onError:function(e){alert(e),console.error(e)}}),C=Object(J.a)(g,2),p=C[0],S=C[1].loading;return O&&(alert(O.message),console.error("GQL INDEX_LIST error: ",O)),Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(ee.a,{p:2,children:Object(B.jsxs)(te.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(B.jsx)(te.a,{item:!0,xs:!0,children:Object(B.jsx)(ne.a,{label:"Index name",value:a,size:"small",fullWidth:!0,onChange:function(e){return r(e.target.value)}})}),Object(B.jsxs)(te.a,{item:!0,xs:"auto",children:[(w||b)&&Object(B.jsx)(ae.a,{size:30}),S&&Object(B.jsx)(ae.a,{size:30,color:"secondary"})]}),Object(B.jsx)(te.a,{item:!0,xs:"auto",children:Object(B.jsx)(re.a,{disabled:!a||0===a.length||!x||x.indexList.length>0,fullWidth:!0,size:"small",variant:"contained",onClick:function(){return v().then((function(){return h()}))},color:"primary",children:"Create index"})}),Object(B.jsx)(te.a,{item:!0,xs:"auto",children:Object(B.jsx)(re.a,{disabled:!x||1!==x.indexList.length||x.indexList[0].name!==a,fullWidth:!0,size:"small",variant:"contained",onClick:function(){return p().then((function(){return h()}))},color:"secondary",children:"Delete index"})})]})}),Object(B.jsx)(ie.a,{component:ee.a,children:Object(B.jsxs)(ce.a,{size:"small",children:[Object(B.jsx)(le.a,{children:Object(B.jsxs)(se.a,{children:[Object(B.jsx)(oe.a,{children:"Name"}),Object(B.jsx)(oe.a,{children:"Uuid"})]})}),Object(B.jsx)(de.a,{children:null===x||void 0===x?void 0:x.indexList.map((function(t){return Object(B.jsxs)(se.a,{onClick:function(){var n;e((n=t.name,{type:u.EDIT_SCHEMA,selectedIndex:n}))},children:[Object(B.jsx)(oe.a,{component:"th",scope:"row",children:t.name}),Object(B.jsx)(oe.a,{children:t.id})]},t.id)}))})]})})]})},xe=n(409),he=n(413),me=n(408),fe=function(){var e=Object(o.c)((function(e){return e.selectedIndex})),t=Object(o.b)();return Object(B.jsxs)("div",{children:["Edit Schema ? ",e,Object(B.jsx)(re.a,{onClick:function(){return t(L(a.INDICES))},children:"Back"})]})},ve=n(339),we=n(406),ge=function(e){if(e)return new Date(e).toLocaleString()},Ce=Object(K.a)(f||(f=Object(X.a)(["\n  mutation RunWebCrawl($name: String!) {\n    runWebCrawl(name: $name) {\n      name\n    }\n  }\n"]))),pe=Object(K.a)(v||(v=Object(X.a)(["\n  mutation AbortWebCrawl($name: String!, $reason: String) {\n    abortWebCrawl(name: $name, aborting_reason: $reason)\n  }\n"]))),Se=Object(K.a)(w||(w=Object(X.a)(["\n  query GetWebCrawl($name: String!) {\n    getWebCrawl(name: $name) {\n      index\n      settings {\n        entryUrl\n        maxDepth\n        filters {\n          pattern\n          status\n        }\n        filterPolicy\n      }\n    }\n  }\n"]))),We=function(e){var t=e.item,n=e.completionCallback,a=Object(o.b)(),r=Object(Z.a)(Ce,{onCompleted:function(e){n()},onError:function(e){alert(e),console.error(e)}}),c=Object(J.a)(r,1)[0],l=Object(Z.a)(pe,{onCompleted:function(e){n()},onError:function(e){alert(e),console.error(e)}}),s=Object(J.a)(l,1)[0],d=Object(we.a)(Se,{variables:{name:t.name},fetchPolicy:"no-cache",onCompleted:function(e){if(e.getWebCrawl)a(A(t.name,e.getWebCrawl.index,e.getWebCrawl.settings));else{var n="The crawl does not exist: "+t.name;alert(n),console.error(n)}},onError:function(e){alert(e),console.error(e)}}),j=Object(J.a)(d,1)[0],b=Object(i.useState)(t.status.abortingReason||""),u=Object(J.a)(b,2),O=u[0],x=u[1],h=Object(i.useCallback)(Object(G.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{name:t.name}});case 2:case"end":return e.stop()}}),e)}))),[c,t.name]),m=Object(i.useCallback)(Object(G.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({variables:{name:t.name,reason:O}});case 2:case"end":return e.stop()}}),e)}))),[s,O,t.name]),f=!t.status.running||t.status.aborting,v=t.status.running,w=t.status.endTime?ge(t.status.endTime):t.status.aborting?"Aborting...":t.status.running?"Running...":void 0;return Object(B.jsxs)(se.a,{children:[Object(B.jsx)(oe.a,{children:Object(B.jsx)(re.a,{size:"small",variant:"outlined",onClick:function(){console.log("editGetCrawlAction"),j()},children:t.name})}),Object(B.jsx)(oe.a,{children:ge(t.status.startTime)}),Object(B.jsx)(oe.a,{children:w}),Object(B.jsx)(oe.a,{children:t.status.crawled}),Object(B.jsx)(oe.a,{children:t.status.rejected}),Object(B.jsx)(oe.a,{children:t.status.error}),Object(B.jsx)(oe.a,{children:Object(B.jsxs)(ee.a,{display:"flex",alignItems:"flex-end",children:[Object(B.jsx)(ee.a,{mr:1,flexGrow:1,children:Object(B.jsx)(ne.a,{label:"Aborting reason",value:O,disabled:f,onChange:function(e){return x(e.target.value)},size:"small",fullWidth:!0})}),Object(B.jsx)(ee.a,{mr:1,children:Object(B.jsx)(re.a,{disabled:f,size:"small",variant:"contained",onClick:m,color:"secondary",children:"Abort"})}),Object(B.jsx)(re.a,{disabled:v,size:"small",variant:"contained",onClick:h,color:"primary",children:"Run"})]})})]},t.name)},Ee=Object(K.a)(g||(g=Object(X.a)(["\n  query WebCrawlList($keywords: String, $start: Int, $rows: Int) {\n    webCrawlList(keywords: $keywords, start: $start, rows: $rows) {\n      name\n      status {\n        running\n        aborting\n        abortingReason\n        crawled\n        rejected\n        redirect\n        error\n        lastError\n        currentCrawl\n        currentDepth\n        startTime\n        endTime\n      }\n    }\n  }\n"]))),ye=Object(K.a)(C||(C=Object(X.a)(["\n  mutation DeleteWebCrawl($name: String!) {\n    deleteWebCrawl(name: $name)\n  }\n"]))),Ie=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.selectedIndex})),n=Object(i.useState)(""),a=Object(J.a)(n,2),r=a[0],c=a[1],l=Object(i.useState)(0),s=Object(J.a)(l,1)[0],d=Object(i.useState)(1e3),j=Object(J.a)(d,1)[0],b=Object(Y.a)(Ee,{variables:{keywords:r,start:s,rows:j},fetchPolicy:"no-cache",pollInterval:1e4}),u=b.loading,O=b.error,x=b.data,h=b.refetch,m=Object(Z.a)(ye,{variables:{name:r},onError:function(e){alert(e),console.error(e)}}),f=Object(J.a)(m,2),v=f[0],w=f[1].loading;O&&(alert(O.message),console.error("GQL WEB_CRAWL_LIST error: ",O));var g=Object(i.useCallback)((function(){e(A(r,t,void 0))}),[e,t,r]);return Object(B.jsx)(ie.a,{component:ve.a,children:Object(B.jsxs)(ce.a,{size:"small",children:[Object(B.jsxs)(le.a,{children:[Object(B.jsx)(se.a,{children:Object(B.jsx)(oe.a,{colSpan:7,children:Object(B.jsxs)(te.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(B.jsx)(te.a,{item:!0,xs:!0,children:Object(B.jsx)(ne.a,{label:"Web crawl name",value:r,size:"small",fullWidth:!0,onChange:function(e){return c(e.target.value)}})}),Object(B.jsxs)(te.a,{item:!0,xs:"auto",children:[u&&Object(B.jsx)(ae.a,{size:30}),w&&Object(B.jsx)(ae.a,{size:30,color:"secondary"})]}),Object(B.jsx)(te.a,{item:!0,xs:"auto",children:Object(B.jsx)(re.a,{disabled:!r||0===r.length||!x||x.webCrawlList.length>0,fullWidth:!0,size:"small",variant:"contained",onClick:g,color:"primary",children:"Create crawl"})}),Object(B.jsx)(te.a,{item:!0,xs:"auto",children:Object(B.jsx)(re.a,{disabled:!x||1!==x.webCrawlList.length||x.webCrawlList[0].name!==r,fullWidth:!0,size:"small",variant:"contained",onClick:function(){return v().then((function(){return h()}))},color:"secondary",children:"Delete crawl"})})]})})}),x&&x.webCrawlList&&x.webCrawlList.length>0&&Object(B.jsxs)(se.a,{children:[Object(B.jsx)(oe.a,{children:"Name"}),Object(B.jsx)(oe.a,{children:"Started"}),Object(B.jsx)(oe.a,{children:"Ended"}),Object(B.jsx)(oe.a,{children:"Crawled"}),Object(B.jsx)(oe.a,{children:"Rejected"}),Object(B.jsx)(oe.a,{children:"Error"}),Object(B.jsx)(oe.a,{})]})]}),Object(B.jsx)(de.a,{children:null===x||void 0===x?void 0:x.webCrawlList.map((function(e){return Object(B.jsx)(We,{item:e,completionCallback:function(){return h()}},e.name)}))})]})})},Le=Object(K.a)(p||(p=Object(X.a)(["\n  mutation RunFileCrawl($name: String!) {\n    runFileCrawl(name: $name) {\n      name\n    }\n  }\n"]))),ke=Object(K.a)(S||(S=Object(X.a)(["\n  mutation AbortFileCrawl($name: String!, $reason: String) {\n    abortFileCrawl(name: $name, aborting_reason: $reason)\n  }\n"]))),Ae=Object(K.a)(W||(W=Object(X.a)(["\n  query GetFileCrawl($name: String!) {\n    getFileCrawl(name: $name) {\n      index\n      settings {\n        entryPath\n        maxDepth\n        filters {\n          pattern\n          status\n        }\n        filterPolicy\n      }\n    }\n  }\n"]))),_e=function(e){var t=e.item,n=e.completionCallback,a=Object(o.b)(),r=Object(Z.a)(Le,{onCompleted:function(e){n()},onError:function(e){alert(e),console.error(e)}}),c=Object(J.a)(r,1)[0],l=Object(Z.a)(ke,{onCompleted:function(e){n()},onError:function(e){alert(e),console.error(e)}}),s=Object(J.a)(l,1)[0],d=Object(we.a)(Ae,{variables:{name:t.name},fetchPolicy:"no-cache",onCompleted:function(e){if(e.getFileCrawl)a(_(t.name,e.getFileCrawl.index,e.getFileCrawl.settings));else{var n="The crawl does not exist: "+t.name;alert(n),console.error(n)}},onError:function(e){alert(e),console.error(e)}}),j=Object(J.a)(d,1)[0],b=Object(i.useState)(t.status.abortingReason||""),u=Object(J.a)(b,2),O=u[0],x=u[1],h=Object(i.useCallback)(Object(G.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{name:t.name}});case 2:case"end":return e.stop()}}),e)}))),[c,t.name]),m=Object(i.useCallback)(Object(G.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({variables:{name:t.name,reason:O}});case 2:case"end":return e.stop()}}),e)}))),[s,O,t.name]),f=!t.status.running||t.status.aborting,v=t.status.running,w=t.status.endTime?ge(t.status.endTime):t.status.aborting?"Aborting...":t.status.running?"Running...":void 0;return Object(B.jsxs)(se.a,{children:[Object(B.jsx)(oe.a,{children:Object(B.jsx)(re.a,{size:"small",variant:"outlined",onClick:function(){console.log("editGetCrawlAction"),j()},children:t.name})}),Object(B.jsx)(oe.a,{children:ge(t.status.startTime)}),Object(B.jsx)(oe.a,{children:w}),Object(B.jsx)(oe.a,{children:t.status.crawled}),Object(B.jsx)(oe.a,{children:t.status.rejected}),Object(B.jsx)(oe.a,{children:t.status.error}),Object(B.jsx)(oe.a,{children:Object(B.jsxs)(ee.a,{display:"flex",alignItems:"flex-end",children:[Object(B.jsx)(ee.a,{mr:1,flexGrow:1,children:Object(B.jsx)(ne.a,{label:"Aborting reason",value:O,disabled:f,onChange:function(e){return x(e.target.value)},size:"small",fullWidth:!0})}),Object(B.jsx)(ee.a,{mr:1,children:Object(B.jsx)(re.a,{disabled:f,size:"small",variant:"contained",onClick:m,color:"secondary",children:"Abort"})}),Object(B.jsx)(re.a,{disabled:v,size:"small",variant:"contained",onClick:h,color:"primary",children:"Run"})]})})]},t.name)},Re=Object(K.a)(E||(E=Object(X.a)(["\n  query FileCrawlList($keywords: String, $start: Int, $rows: Int) {\n    fileCrawlList(keywords: $keywords, start: $start, rows: $rows) {\n      name\n      status {\n        running\n        aborting\n        abortingReason\n        crawled\n        rejected\n        redirect\n        error\n        lastError\n        currentCrawl\n        currentDepth\n        startTime\n        endTime\n      }\n    }\n  }\n"]))),$e=Object(K.a)(y||(y=Object(X.a)(["\n  mutation DeleteFileCrawl($name: String!) {\n    deleteFileCrawl(name: $name)\n  }\n"]))),Ne=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.selectedIndex})),n=Object(i.useState)(""),a=Object(J.a)(n,2),r=a[0],c=a[1],l=Object(i.useState)(0),s=Object(J.a)(l,1)[0],d=Object(i.useState)(1e3),j=Object(J.a)(d,1)[0],b=Object(Y.a)(Re,{variables:{keywords:r,start:s,rows:j},fetchPolicy:"no-cache",pollInterval:1e4}),u=b.loading,O=b.error,x=b.data,h=b.refetch,m=Object(Z.a)($e,{variables:{name:r},onError:function(e){alert(e),console.error(e)}}),f=Object(J.a)(m,2),v=f[0],w=f[1].loading;O&&(alert(O.message),console.error("GQL FILE_CRAWL_LIST error: ",O));var g=Object(i.useCallback)((function(){e(_(r,t,void 0))}),[e,t,r]);return Object(B.jsx)(ie.a,{component:ve.a,children:Object(B.jsxs)(ce.a,{size:"small",children:[Object(B.jsxs)(le.a,{children:[Object(B.jsx)(se.a,{children:Object(B.jsx)(oe.a,{colSpan:7,children:Object(B.jsxs)(te.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(B.jsx)(te.a,{item:!0,xs:!0,children:Object(B.jsx)(ne.a,{label:"File crawl name",value:r,size:"small",fullWidth:!0,onChange:function(e){return c(e.target.value)}})}),Object(B.jsxs)(te.a,{item:!0,xs:"auto",children:[u&&Object(B.jsx)(ae.a,{size:30}),w&&Object(B.jsx)(ae.a,{size:30,color:"secondary"})]}),Object(B.jsx)(te.a,{item:!0,xs:"auto",children:Object(B.jsx)(re.a,{disabled:!r||0===r.length||!x||x.fileCrawlList.length>0,fullWidth:!0,size:"small",variant:"contained",onClick:g,color:"primary",children:"Create crawl"})}),Object(B.jsx)(te.a,{item:!0,xs:"auto",children:Object(B.jsx)(re.a,{disabled:!x||1!==x.fileCrawlList.length||x.fileCrawlList[0].name!==r,fullWidth:!0,size:"small",variant:"contained",onClick:function(){return v().then((function(){return h()}))},color:"secondary",children:"Delete crawl"})})]})})}),x&&x.fileCrawlList&&x.fileCrawlList.length>0&&Object(B.jsxs)(se.a,{children:[Object(B.jsx)(oe.a,{children:"Name"}),Object(B.jsx)(oe.a,{children:"Started"}),Object(B.jsx)(oe.a,{children:"Ended"}),Object(B.jsx)(oe.a,{children:"Crawled"}),Object(B.jsx)(oe.a,{children:"Rejected"}),Object(B.jsx)(oe.a,{children:"Error"}),Object(B.jsx)(oe.a,{})]})]}),Object(B.jsx)(de.a,{children:null===x||void 0===x?void 0:x.fileCrawlList.map((function(e){return Object(B.jsx)(_e,{item:e,completionCallback:function(){return h()}},e.name)}))})]})})},De=n(407);!function(e){e.accept="accept",e.reject="reject"}(I||(I={}));var Fe,Te,ze=n(397),Pe=n(417),Be=n(410),Ue=n(418),Ve=function(e){var t=e.disabled,n=e.status,a=e.setStatus,r=e.isDefault?"Default policy":"Policy";return Object(B.jsxs)(ze.a,{fullWidth:!0,children:[Object(B.jsx)(Pe.a,{id:"policy-label",children:r}),Object(B.jsxs)(Be.a,{labelId:"policy-label",id:"policy",value:n,disabled:t,onChange:function(e){return a(e.target.value)},children:[Object(B.jsx)(Ue.a,{value:I.accept,children:"Accept"}),Object(B.jsx)(Ue.a,{value:I.reject,children:"Reject"})]})]})},qe=function(e){var t,n,a=Object(i.useState)((null===(t=e.filter)||void 0===t?void 0:t.pattern)||""),r=Object(J.a)(a,2),c=r[0],l=r[1],s=Object(i.useState)((null===(n=e.filter)||void 0===n?void 0:n.status)||I.accept),o=Object(J.a)(s,2),d=o[0],j=o[1],b=Object(i.useState)(!1),u=Object(J.a)(b,2),O=u[0],x=u[1];return Object(i.useEffect)((function(){var t,n,a=c!==(null===(t=e.filter)||void 0===t?void 0:t.pattern)||d!==(null===(n=e.filter)||void 0===n?void 0:n.status);x(a)}),[e.filter,c,d]),Object(B.jsxs)(ee.a,{display:"flex",mb:2,children:[Object(B.jsx)(ee.a,{flexGrow:1,mr:2,children:Object(B.jsx)(ne.a,{id:"filter",label:"Wildcard filter",fullWidth:!0,value:c,disabled:e.disabled,onChange:function(e){return l(e.target.value)},placeholder:"https://www.opensearchserver.com/*"})}),Object(B.jsx)(ee.a,{mr:2,children:Object(B.jsx)(Ve,{disabled:e.disabled,status:d,setStatus:j,isDefault:!1})}),Object(B.jsxs)(ee.a,{mr:2,display:"flex",alignItems:"flex-end",children:[!e.filter&&Object(B.jsx)(re.a,{size:"small",variant:"contained",color:"primary",disabled:!c.length||e.disabled,onClick:function(){e.onAdd&&e.onAdd({pattern:c,status:d})},children:"Add"}),e.filter&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(ee.a,{mr:1,children:Object(B.jsx)(re.a,{size:"small",variant:"contained",color:"primary",disabled:!O||e.disabled,onClick:function(){console.log("onSave props",e,e.index),e.onSave&&e.index&&e.onSave({pattern:c,status:d},e.index)},children:"Save"})}),Object(B.jsx)(re.a,{size:"small",variant:"contained",color:"secondary",disabled:e.disabled,onClick:function(){e.onDelete&&e.index&&e.onDelete(e.index)},children:"Delete"})]})]})]})},Ge=n(177),Qe=n(76),He=n(77),Me=function(){function e(t){if(Object(Qe.a)(this,e),this.sequenceNumber=void 0,this.list=void 0,this.sequenceNumber=1,this.list=[],t){var n,a=Object(Ge.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;this.add(r)}}catch(i){a.e(i)}finally{a.f()}}}return Object(He.a)(e,[{key:"add",value:function(e){delete e.__typename;var t={key:this.sequenceNumber++,filter:e};return this.list.push(t),this.getList()}},{key:"save",value:function(e,t){var n=this.list.find((function(e){return e.key===t}));return n&&(n.filter=e),this.getList()}},{key:"delete",value:function(e){return this.list=this.list.filter((function(t){return t.key!==e})),this.getList()}},{key:"getList",value:function(){var e,t=[],n=Object(Ge.a)(this.list);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push(a.filter)}}catch(r){n.e(r)}finally{n.f()}return t}}]),e}(),Je=Object(K.a)(Fe||(Fe=Object(X.a)(["\n  mutation UpsertWebCrawl($name: String!, $settings: WebCrawlSettingsInput!, $index: String!) {\n    upsertWebCrawl(name: $name, settings: $settings, index: $index) {name}\n  }\n"]))),Xe=function(){var e,t,n,a,c,l=Object(o.b)(),s=Object(o.c)((function(e){return e.editWebCrawl})),d=Object(i.useState)((null===s||void 0===s?void 0:s.indexName)||""),j=Object(J.a)(d,2),b=j[0],u=j[1],O=Object(i.useState)((null===s||void 0===s||null===(e=s.settings)||void 0===e?void 0:e.entryUrl)||""),x=Object(J.a)(O,2),h=x[0],m=x[1],f=Object(i.useState)(null===s||void 0===s||null===(t=s.settings)||void 0===t?void 0:t.maxDepth),v=Object(J.a)(f,2),w=v[0],g=v[1],C=Object(i.useState)((null===s||void 0===s?void 0:s.crawlName)||""),p=Object(J.a)(C,2),S=p[0],W=p[1],E=Object(i.useState)((null===s||void 0===s||null===(n=s.settings)||void 0===n?void 0:n.filterPolicy)||I.reject),y=Object(J.a)(E,2),L=y[0],A=y[1],_=Object(i.useState)((null===s||void 0===s||null===(a=s.settings)||void 0===a?void 0:a.filters)||[]),R=Object(J.a)(_,2),$=R[0],N=R[1],D=Object(i.useState)(new Me(null===s||void 0===s||null===(c=s.settings)||void 0===c?void 0:c.filters)),F=Object(J.a)(D,1)[0],T=Object(Z.a)(Je,{variables:{name:S,settings:{entryUrl:h,maxDepth:w,filters:$,filterPolicy:L},index:b},onCompleted:function(e){l(k(r.WEB_CRAWLS)),console.trace(e)},onError:function(e){alert(e),console.error(e)}}),z=Object(J.a)(T,2),P=z[0],U=z[1].loading,V=function(){var e=Object(G.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(e,t){console.log("onSave",e,t),N(F.save(e,t))},H=function(e){N(F.delete(e))},M=void 0!==(null===s||void 0===s?void 0:s.settings)?"Edit Web Crawl":"New Web Crawl";return Object(B.jsx)(ee.a,{p:1,children:Object(B.jsx)(ve.a,{children:Object(B.jsxs)(ee.a,{p:2,children:[Object(B.jsxs)(te.a,{container:!0,justify:"space-between",spacing:10,children:[Object(B.jsx)(te.a,{item:!0,children:Object(B.jsx)(De.a,{align:"right",variant:"h5",children:M})}),Object(B.jsx)(te.a,{item:!0,children:Object(B.jsxs)(te.a,{container:!0,spacing:2,children:[Object(B.jsx)(te.a,{item:!0,children:Object(B.jsx)(re.a,{variant:"contained",color:"secondary",onClick:function(){l(k(r.WEB_CRAWLS))},children:"Cancel"})}),Object(B.jsx)(te.a,{item:!0,children:Object(B.jsx)(re.a,{variant:"contained",color:"primary",onClick:V,children:"Upsert"})})]})})]}),Object(B.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(B.jsxs)(te.a,{container:!0,spacing:2,children:[Object(B.jsx)(te.a,{item:!0,xs:6,children:Object(B.jsx)(ne.a,{fullWidth:!0,required:!0,id:"CrawlName",label:"Crawl Name",value:S,disabled:!0,onChange:function(e){return W(e.target.value)},placeholder:(null===s||void 0===s?void 0:s.crawlName)||"Crawl name"})}),Object(B.jsx)(te.a,{item:!0,xs:6,children:Object(B.jsx)(ne.a,{fullWidth:!0,required:!0,id:"IndexName",label:"Index Name",value:b,disabled:U,onChange:function(e){return u(e.target.value)},placeholder:(null===s||void 0===s?void 0:s.indexName)||"Index name"})}),Object(B.jsx)(te.a,{item:!0,xs:12,children:Object(B.jsx)(ne.a,{fullWidth:!0,required:!0,id:"entryUrl",label:"Entry URL",value:h,disabled:U,onChange:function(e){return m(e.target.value)},placeholder:"https://www.opensearchserver.com"})}),Object(B.jsx)(te.a,{item:!0,xs:6,children:Object(B.jsx)(ne.a,{fullWidth:!0,id:"max_depth",label:"Max depth",type:"number",disabled:U,value:w,onChange:function(e){return g(+e.target.value)},placeholder:"1"})}),Object(B.jsx)(te.a,{item:!0,xs:6,children:Object(B.jsx)(ne.a,{fullWidth:!0,id:"max_number_url",label:"Max number of URL",type:"number",disabled:U,placeholder:"1000"})}),Object(B.jsxs)(te.a,{item:!0,xs:10,children:[Object(B.jsx)(qe,{onAdd:function(e){N(F.add(e))},disabled:U}),F.list.map((function(e){return Object(B.jsx)(qe,{disabled:U,filter:e.filter,index:e.key,onSave:Q,onDelete:H},e.key)}))]}),Object(B.jsx)(te.a,{item:!0,xs:2,children:Object(B.jsx)(Ve,{disabled:!1,status:L,setStatus:A,isDefault:!0})})]})})]})})})},Ke=Object(K.a)(Te||(Te=Object(X.a)(["\n  mutation UpsertFileCrawl($name: String!, $settings: FileCrawlSettingsInput!, $index: String!) {\n    upsertFileCrawl(name: $name, settings: $settings, index: $index) {name}\n  }\n"]))),Ye=function(){var e,t,n,a,c,l=Object(o.b)(),s=Object(o.c)((function(e){return e.editFileCrawl})),d=Object(i.useState)((null===s||void 0===s?void 0:s.indexName)||""),j=Object(J.a)(d,2),b=j[0],u=j[1],O=Object(i.useState)((null===s||void 0===s||null===(e=s.settings)||void 0===e?void 0:e.entryPath)||""),x=Object(J.a)(O,2),h=x[0],m=x[1],f=Object(i.useState)(null===s||void 0===s||null===(t=s.settings)||void 0===t?void 0:t.maxDepth),v=Object(J.a)(f,2),w=v[0],g=v[1],C=Object(i.useState)((null===s||void 0===s?void 0:s.crawlName)||""),p=Object(J.a)(C,2),S=p[0],W=p[1],E=Object(i.useState)((null===s||void 0===s||null===(n=s.settings)||void 0===n?void 0:n.filterPolicy)||I.reject),y=Object(J.a)(E,2),L=y[0],A=y[1],_=Object(i.useState)((null===s||void 0===s||null===(a=s.settings)||void 0===a?void 0:a.filters)||[]),R=Object(J.a)(_,2),$=R[0],N=R[1],D=Object(i.useState)(new Me(null===s||void 0===s||null===(c=s.settings)||void 0===c?void 0:c.filters)),F=Object(J.a)(D,1)[0],T=Object(Z.a)(Ke,{variables:{name:S,settings:{entryPath:h,maxDepth:w,filters:$,filterPolicy:L},index:b},onCompleted:function(e){l(k(r.FILE_CRAWLS)),console.trace(e)},onError:function(e){alert(e),console.error(e)}}),z=Object(J.a)(T,2),P=z[0],U=z[1].loading,V=function(){var e=Object(G.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(e,t){console.log("onSave",e,t),N(F.save(e,t))},H=function(e){N(F.delete(e))},M=void 0!==(null===s||void 0===s?void 0:s.settings)?"Edit File Crawl":"New File Crawl";return Object(B.jsx)(ee.a,{p:1,children:Object(B.jsx)(ve.a,{children:Object(B.jsxs)(ee.a,{p:2,children:[Object(B.jsxs)(te.a,{container:!0,justify:"space-between",spacing:10,children:[Object(B.jsx)(te.a,{item:!0,children:Object(B.jsx)(De.a,{align:"right",variant:"h5",children:M})}),Object(B.jsx)(te.a,{item:!0,children:Object(B.jsxs)(te.a,{container:!0,spacing:2,children:[Object(B.jsx)(te.a,{item:!0,children:Object(B.jsx)(re.a,{variant:"contained",color:"secondary",onClick:function(){l(k(r.FILE_CRAWLS))},children:"Cancel"})}),Object(B.jsx)(te.a,{item:!0,children:Object(B.jsx)(re.a,{variant:"contained",color:"primary",onClick:V,children:"Upsert"})})]})})]}),Object(B.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(B.jsxs)(te.a,{container:!0,spacing:2,children:[Object(B.jsx)(te.a,{item:!0,xs:6,children:Object(B.jsx)(ne.a,{fullWidth:!0,required:!0,id:"CrawlName",label:"Crawl Name",value:S,disabled:!0,onChange:function(e){return W(e.target.value)},placeholder:(null===s||void 0===s?void 0:s.crawlName)||"Crawl name"})}),Object(B.jsx)(te.a,{item:!0,xs:6,children:Object(B.jsx)(ne.a,{fullWidth:!0,required:!0,id:"IndexName",label:"Index Name",value:b,disabled:U,onChange:function(e){return u(e.target.value)},placeholder:(null===s||void 0===s?void 0:s.indexName)||"Index name"})}),Object(B.jsx)(te.a,{item:!0,xs:10,children:Object(B.jsx)(ne.a,{fullWidth:!0,required:!0,id:"entryUrl",label:"Entry Path",value:h,disabled:U,onChange:function(e){return m(e.target.value)},placeholder:"/var/lib/share"})}),Object(B.jsx)(te.a,{item:!0,xs:2,children:Object(B.jsx)(ne.a,{fullWidth:!0,id:"max_depth",label:"Max depth",type:"number",disabled:U,value:w,onChange:function(e){return g(+e.target.value)},placeholder:"1"})}),Object(B.jsxs)(te.a,{item:!0,xs:10,children:[Object(B.jsx)(qe,{onAdd:function(e){N(F.add(e))},disabled:U}),F.list.map((function(e){return Object(B.jsx)(qe,{disabled:U,filter:e.filter,index:e.key,onSave:Q,onDelete:H},e.key)}))]}),Object(B.jsx)(te.a,{item:!0,xs:2,children:Object(B.jsx)(Ve,{disabled:!1,status:L,setStatus:A,isDefault:!0})})]})})]})})})},Ze=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.crawlsView})),n=Object(o.c)((function(e){return e.editWebCrawl})),a=Object(o.c)((function(e){return e.editFileCrawl}));return console.trace("crawlsview",t),Object(B.jsxs)("div",{children:[Object(B.jsx)(D.a,{position:"static",children:Object(B.jsxs)(T.a,{value:t,onChange:function(t,n){e(k(n))},"aria-label":"Crawls tabs",children:[Object(B.jsx)(z.a,{label:"Web Crawls",value:r.WEB_CRAWLS}),Object(B.jsx)(z.a,{label:"File Crawls",value:r.FILE_CRAWLS})]})}),t===r.WEB_CRAWLS&&!n&&Object(B.jsx)(Ie,{}),t===r.FILE_CRAWLS&&!a&&Object(B.jsx)(Ne,{}),t===r.WEB_CRAWLS&&n&&Object(B.jsx)(Xe,{}),t===r.FILE_CRAWLS&&a&&Object(B.jsx)(Ye,{})]})},et=function(){switch(Object(o.c)((function(e){return e.view}))){case a.INDICES:return Object(B.jsx)(Oe,{});case a.CRAWLS:return Object(B.jsx)(Ze,{});case a.QUERIES:return Object(B.jsx)("div",{children:"QUERIES"});case a.GRAPHQL:return Object(B.jsx)(M,{});case a.SCHEMA:return Object(B.jsx)(fe,{});default:return null}},tt=new xe.a({uri:H,cache:new he.a});s.a.render(Object(B.jsx)(c.a.StrictMode,{children:Object(B.jsx)(o.a,{store:N,children:Object(B.jsx)(me.a,{client:tt,children:Object(B.jsxs)(ee.a,{m:0,display:"flex",flexDirection:"column",height:"100vh",children:[Object(B.jsx)(ee.a,{m:0,marginBottom:1,children:Object(B.jsx)(U,{})}),Object(B.jsx)(ee.a,{m:0,p:0,height:"100vh",children:Object(B.jsx)(et,{})})]})})})}),document.getElementById("root"))}},[[338,1,2]]]);
//# sourceMappingURL=main.30607544.chunk.js.map